{% extends "base.html" %}
{% block title %}Home - CarDeal{% endblock %}
{% block content %}
<h1>Dealers</h1>

<form method="get" action="{% url 'home' %}">
  <label>Filter by state:</label>
  <input name="state" value="{{ request.GET.state|default_if_none:'' }}" />
  <button type="submit">Filter</button>
</form>

{% if dealers %}
  {% for d in dealers %}
    <div class="dealer">
      <h3><a href="{% url 'dealer_detail' d.id %}">{{ d.name }}</a></h3>
      <p>{{ d.city }}, {{ d.state }}</p>
      <p>{{ d.address }}</p>
      {% if user.is_authenticated %}
        <a class="btn" href="{% url 'add_review' d.id %}">Post Review</a>
      {% endif %}
    </div>
  {% endfor %}
{% else %}
  <p>No dealers found.</p>
{% endif %}
{% endblock %}
